{
  "$schema": "https://vega.github.io/schema/vega/v4.json",
  "title": "Team List",
  "autosize": {"value": "none"},
  "signals": [
    {
      "name": "selected_team",
      "value": "",
      "bind": {
        "input": "select",
        "options": ["qarth", "offer", "price"],
        "name": "Select Team:"
      }
    },
    {
      "name": "team_services",
      "value": {
        "qarth": ["QARTH", "QarthSourceAsyncTask", "QarthV2HTTPTask", "QarthProductTask", "QarthSourceTask"],
        "offer": ["OfferLookupBySellerOfferIdAndSellerId", "offerStoreLookupTask", "OfferService#SetupAPI", "OfferPricingStalenessService", "OfferStoreSetupTask", "OfferService#EnrichAPI", "OfferService#PublishAPI", "offerRetireValidaiton", "OfferPricingTask"],
        "price": "PriceService#MSRPAPI"
      }
    },
    {
      "name": "trigger_filter",
      "on": [
        {
          "events": { "type": "click", "markname": "apply_button" },
          "update": '''selected_team && team_services[selected_team] ? kibanaAddFilter({ "match": {"failed_svc": "PriceService#MSRPAPI"}}, "hl_feed") : null'''
        }
      ]
    }
  ],
  "marks": [
    {
      "name": "apply_button",
      "type": "rect",
      "encode": {
        "enter": {
          "x": { "signal": "10"},
          "y": { "signal": "height - 50"},
          "width": { "value": 120 },
          "height": { "value": 30 },
          "fill": { "value": "#2a74d6" },
          "cursor": { "value": "pointer" }
        }
      }
    },
    {
      "type": "text",
      "encode": {
        "enter": {
          "x": { "signal": "70"},
          "y": { "signal": "height - 35"},
          "align": { "value": "center" },
          "baseline": { "value": "middle" },
          "text": { "value": "Apply Changes" },
          "fill": { "value": "white" },
          "fontSize": { "value": 14 },
          "fontWeight": { "value": "bold" }
        }
      }
    }
  ]
}
