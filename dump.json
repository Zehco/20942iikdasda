{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "width": 700,
  "height": 300,
  "padding": 5,

  "signals": [
    {
      "name": "selected_team",
      "value": "TeamA",
      "bind": {
        "input": "select",
        "options": ["TeamA", "TeamB", "TeamC"]
      }
    }
  ],

  "data": [
    {
      "name": "team_data",
      "url": {
        "%context%": true,
        "%timefield%": "timestamp",
        "index": "your-index-name",
        "body": {
          "size": 0,
          "query": {
            "bool": {
              "filter": [
                {
                  "term": {
                    "team_name.keyword": {
                      "value": {
                        "signal": "selected_team"
                      }
                    }
                  }
                },
                {
                  "range": {
                    "timestamp": {
                      "gte": "now-7d/d",
                      "lte": "now"
                    }
                  }
                }
              ]
            }
          },
          "aggs": {
            "time_buckets": {
              "date_histogram": {
                "field": "timestamp",
                "fixed_interval": "30m"
              }
            }
          }
        }
      },
      "format": {
        "property": "aggregations.time_buckets.buckets"
      }
    }
  ],

  "scales": [
    {
      "name": "x",
      "type": "time",
      "domain": {
        "data": "team_data",
        "field": "key"
      },
      "range": "width"
    },
    {
      "name": "y",
      "type": "linear",
      "domain": {
        "data": "team_data",
        "field": "doc_count"
      },
      "range": "height",
      "nice": true,
      "zero": true
    }
  ],

  "axes": [
    {
      "orient": "bottom",
      "scale": "x",
      "format": "%m-%d %H:%M",
      "labelAngle": -45
    },
    {
      "orient": "left",
      "scale": "y",
      "title": "Count"
    }
  ],

  "marks": [
    {
      "type": "line",
      "from": {
        "data": "team_data"
      },
      "encode": {
        "enter": {
          "x": {
            "scale": "x",
            "field": "key"
          },
          "y": {
            "scale": "y",
            "field": "doc_count"
          },
          "stroke": {
            "value": "steelblue"
          },
          "strokeWidth": {
            "value": 2
          }
        }
      }
    }
  ]
}
